<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FIT CHECK</title>

<style>
body{margin:0;font-family:Arial;background:#111;color:white}
header{background:#b0125b;padding:20px;text-align:center}
nav{display:flex;justify-content:space-between;align-items:center;background:#d05a82;padding:10px 20px}
nav a{color:white;text-decoration:none;margin-right:15px;cursor:pointer}
.banner img{width:100%;height:400px;object-fit:cover}

.products{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;padding:30px
}
.card{background:#1c1c1c;padding:15px;border-radius:10px}
.card img{width:100%;height:250px;object-fit:cover;border-radius:10px}

button{background:#b0125b;color:white;border:none;padding:8px;margin-top:8px;cursor:pointer;width:100%}
.hidden{display:none}
input{width:90%;padding:10px;margin:10px}

.qty{display:flex;justify-content:space-between;align-items:center}
.qty button{width:30%}

#userArea{cursor:pointer;font-weight:bold}
.dropdown{position:absolute;right:20px;background:#222;padding:10px;border-radius:8px}
.dropdown div{padding:8px;cursor:pointer}
.dropdown div:hover{background:#333}
</style>
</head>

<body>

<header>
  <h1>FIT CHECK</h1>
  <p>Find your perfect fit</p>
</header>

<nav>
  <div>
    <a onclick="showHome()">Home</a>
    <a onclick="filterCategory('tops')">Tops</a>
    <a onclick="filterCategory('bottoms')">Bottoms</a>
    <a onclick="filterCategory('bags')">Bags</a>
    <a onclick="openBag()">Bag (<span id="bagCount">0</span>)</a>
  </div>
  <div id="userArea" onclick="toggleProfile()">Login</div>
</nav>

<div id="profileMenu" class="dropdown hidden">
  <div onclick="openProfile()">Profile</div>
  <div onclick="openOrders()">Orders</div>
  <div onclick="logout()">Logout</div>
</div>

<!-- HOME -->
<div id="homePage">
  <div class="banner"><img src="jhhhhh.jpg"></div>
  <div class="products" id="productList"></div>
</div>

<!-- BAG -->
<div id="bagPage" class="hidden">
  <h2 style="padding:20px">Your Bag</h2>
  <div class="products" id="bagItems"></div>
  <h3 style="padding:20px">Total: â‚¹<span id="totalAmount">0</span></h3>
  <button style="margin:20px" onclick="payNow()">Pay Now</button>
</div>

<!-- LOGIN -->
<div id="loginPage" class="hidden">
  <h2>Login</h2>
  <input id="phoneInput" placeholder="Phone number">
  <button onclick="sendOTP()">Send OTP</button>
  <div id="otpBox" class="hidden">
    <input id="otpInput" placeholder="Enter OTP">
    <button onclick="verifyOTP()">Verify</button>
  </div>
</div>

<!-- SIGNUP -->
<div id="signupPage" class="hidden">
  <h2>Sign Up</h2>
  <input id="name" placeholder="Name">
  <input id="dob" type="date">
  <input id="age" placeholder="Age">
  <input id="address" placeholder="Delivery Address">
  <button onclick="completeSignup()">Create Account</button>
</div>

<!-- PROFILE -->
<div id="profilePage" class="hidden">
  <h2>Your Profile</h2>
  <p id="profileData"></p>
</div>

<!-- ORDERS -->
<div id="ordersPage" class="hidden">
  <h2 style="padding:20px">Order History</h2>
  <div class="products" id="orderList"></div>
</div>

<script>
let products=[
 {name:"Pink Top",category:"tops",price:999,img:"Y2K Pink Leopard Print Halter Neck Scarf, Letter Print Tank Top.jpeg"},
 {name:"Blue Jeans",category:"bottoms",price:1599,img:"Sky blue high waisted horn jeans women elastic sexy skinny jeans fashionable versatile long slim flared pants splicing and cut - Sky Blue _ S _ China.jpeg"},
 {name:"Hand Bag",category:"bags",price:1299,img:"download.jpeg"},
 {name:"Red Top",category:"tops",price:899,img:"download (3).jpeg"},
 {name:"Denim Jeans",category:"bottoms",price:1799,img:"Spray Paint Print Black Low Rise Zipper Details Distressed Wide-leg Jeans.jpeg"},
 {name:"Sling Bag",category:"bags",price:999,img:"download (4).jpeg"}
];

let bag=JSON.parse(localStorage.getItem("bag"))||[];
let orders=JSON.parse(localStorage.getItem("orders"))||[];
let currentOTP="",currentPhone="";

function hideAll(){
 document.querySelectorAll("body > div:not(header):not(nav)").forEach(d=>d.classList.add("hidden"));
 profileMenu.classList.add("hidden");
}

function showHome(){hideAll();homePage.classList.remove("hidden")}

function renderProducts(list){
 productList.innerHTML="";
 list.forEach(p=>{
  productList.innerHTML+=`
  <div class="card">
    <img src="${p.img}">
    <h3>${p.name}</h3>
    <p>â‚¹${p.price}</p>
    <button onclick='addToBag(${JSON.stringify(p)})'>Add to Bag</button>
  </div>`;
 });
}
renderProducts(products);

function filterCategory(c){showHome();renderProducts(products.filter(p=>p.category===c))}

function addToBag(p){
 let item=bag.find(i=>i.name===p.name);
 if(item) item.qty++;
 else bag.push({...p,qty:1});
 localStorage.setItem("bag",JSON.stringify(bag));
 updateBagCount();
}

function updateBagCount(){bagCount.innerText=bag.reduce((a,b)=>a+b.qty,0)}
updateBagCount();

function openBag(){
 hideAll();bagPage.classList.remove("hidden");
 bagItems.innerHTML="";let total=0;
 bag.forEach((p,i)=>{
  total+=p.price*p.qty;
  bagItems.innerHTML+=`
  <div class="card">
   <img src="${p.img}">
   <h3>${p.name}</h3>
   <p>â‚¹${p.price}</p>
   <div class="qty">
    <button onclick="changeQty(${i},-1)">-</button>
    <span>${p.qty}</span>
    <button onclick="changeQty(${i},1)">+</button>
   </div>
   <button onclick="removeItem(${i})">Remove</button>
  </div>`;
 });
 totalAmount.innerText=total;
}

function changeQty(i,val){
 bag[i].qty+=val;
 if(bag[i].qty<=0) bag.splice(i,1);
 localStorage.setItem("bag",JSON.stringify(bag));
 openBag();updateBagCount();
}

function removeItem(i){
 bag.splice(i,1);
 localStorage.setItem("bag",JSON.stringify(bag));
 openBag();updateBagCount();
}

function payNow(){
 if(!bag.length)return alert("Bag empty");
 orders.push({date:new Date().toLocaleString(),items:[...bag]});
 localStorage.setItem("orders",JSON.stringify(orders));
 bag=[];localStorage.removeItem("bag");
 updateBagCount();
 alert("Payment Successful ðŸŽ‰");
 showHome();
}

function sendOTP(){
  currentPhone = phoneInput.value.trim();

  if(currentPhone.length !== 10){
    alert("Enter valid 10-digit phone number");
    return;
  }

  currentOTP = Math.floor(1000 + Math.random() * 9000).toString();

  // SIMULATED OTP (for testing)
  alert("Your OTP is: " + currentOTP);

  otpBox.classList.remove("hidden");
}


function verifyOTP(){
  if(otpInput.value.trim() !== currentOTP){
    alert("Incorrect OTP");
    return;
  }

  let user = JSON.parse(localStorage.getItem(currentPhone));

  if(user){
    localStorage.setItem("loggedIn", currentPhone);
    loadUser();
  } else {
    hideAll();
    signupPage.classList.remove("hidden");
  }
}


function completeSignup(){
 let user={name:name.value,dob:dob.value,age:age.value,address:address.value};
 localStorage.setItem(currentPhone,JSON.stringify(user));
 localStorage.setItem("loggedIn",currentPhone);
 loadUser();
}

function loadUser(){
 let u=JSON.parse(localStorage.getItem(localStorage.getItem("loggedIn")));
 userArea.innerText="Hey, "+u.name;
 showHome();
}

function toggleProfile(){
 let phone=localStorage.getItem("loggedIn");
 if(!phone){hideAll();loginPage.classList.remove("hidden")}
 else profileMenu.classList.toggle("hidden");
}

function openProfile(){
 let u=JSON.parse(localStorage.getItem(localStorage.getItem("loggedIn")));
 hideAll();profilePage.classList.remove("hidden");
 profileData.innerHTML=`Name: ${u.name}<br>Age: ${u.age}<br>DOB: ${u.dob}<br>Address: ${u.address}`;
}

function openOrders(){
 hideAll();ordersPage.classList.remove("hidden");
 orderList.innerHTML="";
 orders.forEach(o=>{
  orderList.innerHTML+=`
  <div class="card">
   <p><b>${o.date}</b></p>
   <p>${o.items.map(i=>i.name+" x"+i.qty).join(", ")}</p>
  </div>`;
 });
}

function logout(){localStorage.removeItem("loggedIn");location.reload()}

if(localStorage.getItem("loggedIn")) loadUser();
</script>

</body>
</html>

